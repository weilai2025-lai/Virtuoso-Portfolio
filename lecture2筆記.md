# ECE 391 Lecture 2 筆記：CMOS 製造與反相器物理運作全解

---

## 第一部分：CMOS 製造——從無到有的立體建築
晶片製造就像是在「矽晶圓」這塊土地上蓋大樓。過程是不斷重複「塗漆、放模板、照光、挖洞」的循環（黃光微影製程）。

### 1. 準備地基 (Wafer & Oxidation)
*   **P-substrate**：所有的基礎始於一片「P 型矽晶圓」，這也是 NMOS 電晶體天然的地基。
*   **氧化層 (SiO2)**：在高溫下長出一層薄膜。它是晶圓的「保護衣」，後續用來擋住酸液或雜質。

### 2. 定義區域 (Photoresist & Lithography)
*   **塗布光阻**：在保護衣上刷一層「感光油漆」。
*   **遮罩 (Mask) 與曝光**：放上圖案模板，用 UV 光照。這份筆記使用的是「正光阻」邏輯：**被光照到的區域會變軟**。
*   **顯影 (Development)**：洗掉變軟的光阻，在感光油漆上「開了一扇窗」。

### 3. 挖洞與注入雜質 (Etching & Doping)
*   **蝕刻 (Etch)**：用強酸 (HF) 往下挖。酸液會穿過光阻的窗戶，把下方的保護衣 (SiO2) 融掉。
*   **離子佈植 (n-well)**：往洞裡打入 N 型雜質。原本 P 型的地基，局部變成了 **N-well (N 井)**。這是 **PMOS** 未來的居住區。
*   **清理**：把用完的光阻和保護衣全部拆掉，回到乾淨的矽表面。

### 4. 製作控制開關 (Gate Formation)
*   **薄氧化層**：長出一層極薄的絕緣層（閘極氧化層）。
*   **複晶矽 (Poly-Si)**：鋪上一層矽，並摻入大量雜質使其具備「類金屬」的導電性。
*   **圖案化**：重複光刻流程，把整片 Poly 切割成兩根細長條，這就是 **閘極 (Gate)**。

### 5. 自我對準與源汲極 (Self-Aligned Diffusion)
*   **聰明的盾牌**：在注入高濃度雜質 ($n+$ 或 $p+$) 時，**閘極會當作盾牌**，擋住它正下方的區域。
*   **結果**：被擋住的地方變成「通道」，左右兩邊沒被擋住的地方自動變成「源極」與「汲極」。

### 6. 接線工程 (Contact & Metalization)
*   **接觸孔 (Contact)**：在絕緣層鑽垂直的洞，這就是「插座孔」。
*   **金屬化 (Metal 1)**：鋪上金屬並圖案化，切開成獨立的電線，連接電源、地線與訊號。

---

## 第二部分：反相器 (Inverter) 的物理構造分析
根據投影片第 23 頁剖面圖，我們將電路拆解為兩個實驗室：

### 1. 固定背景（偏壓系統）
為了讓電晶體不漏電，必須維持「地基電壓固定」：
*   **PMOS 區域 (N-well)**：透過綠色的 **n+ Tap** 連接 **VDD**。確保地基永遠處於高壓。
*   **NMOS 區域 (P-sub)**：透過橘色的 **p+ Tap** 連接 **GND**。確保地基永遠處於低壓。

### 2. 核心原則：PN 接面隔離 (偏壓與空乏區)
*   **壓差為 0 (平衡)**：當 P 端與 N 端都是 VDD 時，不導通也不漏電。
*   **逆向偏壓 (隔離)**：當 **P 端比 N 端電位低**時，會形成「空乏區」像一道絕緣牆擋住電流。
*   **黃金鐵律**：在晶片中，N 型區域的電壓必須 **恆大於或等於** 與之接觸的 P 型區域。

---

## 第三部分：輸入訊號下的全區域物理狀態筆記
這是最核心的複習資料，分析當輸入 A 改變時，每一個 $p+/n+$ 區域與地基的電位。

### 狀況 A：輸入 A = 0V (邏輯 0)
*   **PMOS (導通 ON)**：
    *   **閘極 (Poly)**：0V。與地基 (VDD) 有壓差(吸引電洞)，**電橋搭起**。
    *   **右 Source (p+)**：VDD。
    *   **左 Drain (p+)**：因橋通了，電壓灌過來變 **VDD**。
    *   **輸出端 Y**：VDD (邏輯 1)。
    *   **隔離狀態**：p+ 與 N-well 電位皆為 VDD，**平衡不漏電**。
*   **NMOS (斷路 OFF)**：
    *   **閘極 (Poly)**：0V。與地基 (0V) 無壓差，**無電橋**。
    *   **左 Source (n+)**：0V (接 GND)。
    *   **右 Drain (n+)**：接輸出 Y，被迫變為 **VDD**。
    *   **隔離狀態**：汲極 ($n+, VDD$) 高於地基 ($P-sub, 0V$)，**逆向偏壓隔離**，輸出訊號不會漏到地。

### 狀況 B：輸入 A = VDD (邏輯 1)
*   **NMOS (導通 ON)**：
    *   **閘極 (Poly)**：VDD。與地基 (0V) 有壓差(吸引電子)，**電橋搭起**。
    *   **左 Source (n+)**：0V (接 GND)。
    *   **右 Drain (n+)**：因橋通了，電荷洩洪到地，電位變 **0V**。
    *   **輸出端 Y**：0V (邏輯 0)。
    *   **隔離狀態**：n+ 與 P-sub 電位皆為 0V，**平衡不漏電**。
*   **PMOS (斷路 OFF)**：
    *   **閘極 (Poly)**：VDD。與地基 (VDD) 無壓差，**無電橋**。
    *   **右 Source (p+)**：VDD。
    *   **左 Drain (p+)**：接輸出 Y，變為 **0V**。
    *   **隔離狀態**：汲極 ($p+, 0V$) 低於地基 ($N-well, VDD$)，**逆向偏壓隔離**，電源不會漏到輸出。

---

## 第四部分：常見疑惑解答 (FAQ)
**Q：為什麼 Metal 1 把 PMOS 的 p+ (Source) 和 n+ (Well Tap) 連在一起不會短路？**
**A：** 這是為了給地基「偏壓」。n+ 是 $n$-well 的接線柱，把它連到 VDD 是為了讓地基（N-well）電位跟水源（p+ Source）一樣高。這樣兩者之間壓差為 0，電流就不會從源極漏進地基裡，而是會乖乖地等著閘極開門。

**Q：閘極 (Gate) 到底有沒有通電到矽裡面？**
**A：** 完全沒有。閘極下方有一層超薄的氧化層絕緣體。閘極是靠「電力場」隔空吸引下方的電荷來搭橋的。